<!DOCTYPE html>
<html>
  <head>
    <title>Anime</title>
    <meta charset="utf-8">
    <meta name="author" content="Gina Reynolds, May 2019" />
    <link href="libs/remark-css-0.0.1/kunoichi.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/ninjutsu.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Anime
### Gina Reynolds, May 2019

---






```r
source("../xaringan_reveal_parenthetical.R")
```


```r
library(tidyverse)
```

```
## ── Attaching packages ───────────────────────────────────────────────────────────────────────── tidyverse 1.2.1 ──
```

```
## ✔ ggplot2 3.2.0     ✔ purrr   0.3.2
## ✔ tibble  2.1.3     ✔ dplyr   0.7.8
## ✔ tidyr   0.8.2     ✔ stringr 1.4.0
## ✔ readr   1.1.1     ✔ forcats 0.3.0
```

```
## Warning: package 'ggplot2' was built under R version 3.5.2
```

```
## Warning: package 'tibble' was built under R version 3.5.2
```

```
## Warning: package 'purrr' was built under R version 3.5.2
```

```
## Warning: package 'stringr' was built under R version 3.5.2
```

```
## ── Conflicts ──────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
```

```r
library(lubridate)
```

```
## 
## Attaching package: 'lubridate'
```

```
## The following object is masked from 'package:base':
## 
##     date
```

```r
library(paletteer) 
```

```
## Warning: package 'paletteer' was built under R version 3.5.2
```

```r
library(extrafont)
```

```
## Registering fonts with R
```

```r
# font_import()
```


```r
tidy_anime &lt;- readr::read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-04-23/tidy_anime.csv")
```

```
## Parsed with column specification:
## cols(
##   .default = col_character(),
##   animeID = col_integer(),
##   episodes = col_integer(),
##   airing = col_logical(),
##   start_date = col_date(format = ""),
##   end_date = col_date(format = ""),
##   score = col_double(),
##   scored_by = col_integer(),
##   rank = col_integer(),
##   popularity = col_integer(),
##   members = col_integer(),
##   favorites = col_integer()
## )
```

```
## See spec(...) for full column specifications.
```

```r
# remove duplicate entries because of multiple genres
# only keep those scored by at least 100 users
tidy_anime_unique &lt;- tidy_anime %&gt;% 
  distinct(animeID, .keep_all = TRUE) %&gt;% 
  filter(scored_by &gt;= 100, !is.na(score), !is.na(start_date)) %&gt;% 
  mutate(decade = (year(start_date) %/% 10) * 10)

# focus just on films since 1960
tidy_anime_movie &lt;- tidy_anime_unique %&gt;% 
  filter(type == "Movie", start_date &gt;= as.Date("1960-01-01")) %&gt;% 
  mutate(decade = paste0(decade, "s"))

# top 5 most rated films to be highlighted in plot
movie_most_scored &lt;- tidy_anime_movie %&gt;% 
  top_n(5, scored_by) 

# background colour
back_col &lt;- paletteer_d(ghibli, MarnieLight1)[2]
```



```r
ggplot(tidy_anime_movie, aes(x = decade, y = score)) +
  geom_jitter(aes(size = scored_by, fill = decade), 
              width = 0.1, alpha = 0.4, shape = 21) +
  geom_boxplot(aes(fill = decade), colour = "white", width = 0.4,
               show.legend = FALSE, outlier.shape = NA, alpha = 0.4) +
  geom_text(aes(x = "2000s", y = 9.5, 
                label = "Movies with the most user ratings\ntend to have the highest scores"),
            size = 2.5, hjust = 0.5) +
  scale_y_continuous(limits = c(0, 10), breaks = seq(0, 10, 2)) +
  scale_size_continuous(breaks = seq(100000, 500000, 100000), 
                        labels = paste0(seq(100, 500, 100), "k")) +
  labs(title = "Are Anime Movies getting better?",
       subtitle = "Anime movies since the 1960s as scored by MyAnimeList users",
       caption = "Movies scored by less than 100 users have been removed\n@committedtotape") +
  guides(colour = FALSE,
         fill = FALSE) -&gt;
  g
```

---

class: split-40
count: false

.column[.content[

```r
*ggplot(tidy_anime_movie, aes(x = decade, y = score))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_basic_build_1-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(tidy_anime_movie, aes(x = decade, y = score)) +
* geom_jitter(aes(size = scored_by, fill = decade),
*             width = 0.1, alpha = 0.4, shape = 21)
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_basic_build_3-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(tidy_anime_movie, aes(x = decade, y = score)) +
  geom_jitter(aes(size = scored_by, fill = decade), 
              width = 0.1, alpha = 0.4, shape = 21) +
* geom_boxplot(aes(fill = decade), colour = "white", width = 0.4,
*              show.legend = FALSE, outlier.shape = NA, alpha = 0.4)
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_basic_build_5-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(tidy_anime_movie, aes(x = decade, y = score)) +
  geom_jitter(aes(size = scored_by, fill = decade), 
              width = 0.1, alpha = 0.4, shape = 21) +
  geom_boxplot(aes(fill = decade), colour = "white", width = 0.4,
               show.legend = FALSE, outlier.shape = NA, alpha = 0.4) +
* geom_text(aes(x = "2000s", y = 9.5,
*               label = "Movies with the most user ratings\ntend to have the highest scores"),
*           size = 2.5, hjust = 0.5)
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_basic_build_8-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(tidy_anime_movie, aes(x = decade, y = score)) +
  geom_jitter(aes(size = scored_by, fill = decade), 
              width = 0.1, alpha = 0.4, shape = 21) +
  geom_boxplot(aes(fill = decade), colour = "white", width = 0.4,
               show.legend = FALSE, outlier.shape = NA, alpha = 0.4) +
  geom_text(aes(x = "2000s", y = 9.5, 
                label = "Movies with the most user ratings\ntend to have the highest scores"),
            size = 2.5, hjust = 0.5) +
* scale_y_continuous(limits = c(0, 10), breaks = seq(0, 10, 2))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_basic_build_9-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(tidy_anime_movie, aes(x = decade, y = score)) +
  geom_jitter(aes(size = scored_by, fill = decade), 
              width = 0.1, alpha = 0.4, shape = 21) +
  geom_boxplot(aes(fill = decade), colour = "white", width = 0.4,
               show.legend = FALSE, outlier.shape = NA, alpha = 0.4) +
  geom_text(aes(x = "2000s", y = 9.5, 
                label = "Movies with the most user ratings\ntend to have the highest scores"),
            size = 2.5, hjust = 0.5) +
  scale_y_continuous(limits = c(0, 10), breaks = seq(0, 10, 2)) +
* scale_size_continuous(breaks = seq(100000, 500000, 100000),
*                       labels = paste0(seq(100, 500, 100), "k"))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_basic_build_11-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(tidy_anime_movie, aes(x = decade, y = score)) +
  geom_jitter(aes(size = scored_by, fill = decade), 
              width = 0.1, alpha = 0.4, shape = 21) +
  geom_boxplot(aes(fill = decade), colour = "white", width = 0.4,
               show.legend = FALSE, outlier.shape = NA, alpha = 0.4) +
  geom_text(aes(x = "2000s", y = 9.5, 
                label = "Movies with the most user ratings\ntend to have the highest scores"),
            size = 2.5, hjust = 0.5) +
  scale_y_continuous(limits = c(0, 10), breaks = seq(0, 10, 2)) +
  scale_size_continuous(breaks = seq(100000, 500000, 100000), 
                        labels = paste0(seq(100, 500, 100), "k")) +
* labs(title = "Are Anime Movies getting better?",
*      subtitle = "Anime movies since the 1960s as scored by MyAnimeList users",
*      caption = "Movies scored by less than 100 users have been removed\n@committedtotape")
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_basic_build_14-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(tidy_anime_movie, aes(x = decade, y = score)) +
  geom_jitter(aes(size = scored_by, fill = decade), 
              width = 0.1, alpha = 0.4, shape = 21) +
  geom_boxplot(aes(fill = decade), colour = "white", width = 0.4,
               show.legend = FALSE, outlier.shape = NA, alpha = 0.4) +
  geom_text(aes(x = "2000s", y = 9.5, 
                label = "Movies with the most user ratings\ntend to have the highest scores"),
            size = 2.5, hjust = 0.5) +
  scale_y_continuous(limits = c(0, 10), breaks = seq(0, 10, 2)) +
  scale_size_continuous(breaks = seq(100000, 500000, 100000), 
                        labels = paste0(seq(100, 500, 100), "k")) +
  labs(title = "Are Anime Movies getting better?",
       subtitle = "Anime movies since the 1960s as scored by MyAnimeList users",
       caption = "Movies scored by less than 100 users have been removed\n@committedtotape") +
* guides(colour = FALSE,
*        fill = FALSE)
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_basic_build_16-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
ggplot(tidy_anime_movie, aes(x = decade, y = score)) +
  geom_jitter(aes(size = scored_by, fill = decade), 
              width = 0.1, alpha = 0.4, shape = 21) +
  geom_boxplot(aes(fill = decade), colour = "white", width = 0.4,
               show.legend = FALSE, outlier.shape = NA, alpha = 0.4) +
  geom_text(aes(x = "2000s", y = 9.5, 
                label = "Movies with the most user ratings\ntend to have the highest scores"),
            size = 2.5, hjust = 0.5) +
  scale_y_continuous(limits = c(0, 10), breaks = seq(0, 10, 2)) +
  scale_size_continuous(breaks = seq(100000, 500000, 100000), 
                        labels = paste0(seq(100, 500, 100), "k")) +
  labs(title = "Are Anime Movies getting better?",
       subtitle = "Anime movies since the 1960s as scored by MyAnimeList users",
       caption = "Movies scored by less than 100 users have been removed\n@committedtotape") +
  guides(colour = FALSE,
         fill = FALSE) -&gt;
* g
```
]]
.column[.content.center[

]]

---


```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
  theme(panel.grid = element_line(colour = "gray40")) +
  theme(panel.grid.major.x = element_blank()) +
  theme(axis.text = element_text(colour = "white")) +
  theme(legend.position = c(0.5, 0.15)) +
  theme(legend.direction = "horizontal") +
  theme(legend.background = element_rect(fill = back_col)) +
  theme(legend.box.background = element_rect(fill = back_col)) +
  theme(legend.key = element_rect(fill = back_col,  colour = back_col)) +
  theme(legend.title = element_text(size = rel(0.8))) +
  guides(colour = FALSE,
         fill = FALSE,
         size = guide_legend(title.position = "top", title.hjust = 0.5,
                             override.aes = list(colour = "white", alpha = 1)))
```

![](03_anime_files/figure-html/thematic-1.png)&lt;!-- --&gt;

---

class: split-40
count: false

.column[.content[

```r
*g 
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_1-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
* theme(text = element_text(colour = "white"
*                           #, family = "AnimeAce"
*                           ))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_4-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
* theme(plot.title = element_text(
*   #family = "AnimeAceBold",
*   size = rel(1.5)))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_7-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
* theme(plot.caption = element_text(size = rel(0.7)))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_8-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
* theme(plot.background = element_rect(fill = back_col))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_9-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
* theme(panel.background = element_rect(fill = back_col))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_10-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
* theme(panel.grid = element_line(colour = "gray40"))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_11-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
  theme(panel.grid = element_line(colour = "gray40")) +
* theme(panel.grid.major.x = element_blank())
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_12-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
  theme(panel.grid = element_line(colour = "gray40")) +
  theme(panel.grid.major.x = element_blank()) +
* theme(axis.text = element_text(colour = "white"))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_13-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
  theme(panel.grid = element_line(colour = "gray40")) +
  theme(panel.grid.major.x = element_blank()) +
  theme(axis.text = element_text(colour = "white")) +
* theme(legend.position = c(0.5, 0.15))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_14-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
  theme(panel.grid = element_line(colour = "gray40")) +
  theme(panel.grid.major.x = element_blank()) +
  theme(axis.text = element_text(colour = "white")) +
  theme(legend.position = c(0.5, 0.15)) +
* theme(legend.direction = "horizontal")
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_15-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
  theme(panel.grid = element_line(colour = "gray40")) +
  theme(panel.grid.major.x = element_blank()) +
  theme(axis.text = element_text(colour = "white")) +
  theme(legend.position = c(0.5, 0.15)) +
  theme(legend.direction = "horizontal") +
* theme(legend.background = element_rect(fill = back_col))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_16-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
  theme(panel.grid = element_line(colour = "gray40")) +
  theme(panel.grid.major.x = element_blank()) +
  theme(axis.text = element_text(colour = "white")) +
  theme(legend.position = c(0.5, 0.15)) +
  theme(legend.direction = "horizontal") +
  theme(legend.background = element_rect(fill = back_col)) +
* theme(legend.box.background = element_rect(fill = back_col))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_17-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
  theme(panel.grid = element_line(colour = "gray40")) +
  theme(panel.grid.major.x = element_blank()) +
  theme(axis.text = element_text(colour = "white")) +
  theme(legend.position = c(0.5, 0.15)) +
  theme(legend.direction = "horizontal") +
  theme(legend.background = element_rect(fill = back_col)) +
  theme(legend.box.background = element_rect(fill = back_col)) +
* theme(legend.key = element_rect(fill = back_col,  colour = back_col))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_18-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
  theme(panel.grid = element_line(colour = "gray40")) +
  theme(panel.grid.major.x = element_blank()) +
  theme(axis.text = element_text(colour = "white")) +
  theme(legend.position = c(0.5, 0.15)) +
  theme(legend.direction = "horizontal") +
  theme(legend.background = element_rect(fill = back_col)) +
  theme(legend.box.background = element_rect(fill = back_col)) +
  theme(legend.key = element_rect(fill = back_col,  colour = back_col)) +
* theme(legend.title = element_text(size = rel(0.8)))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_19-1.png)&lt;!-- --&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
g +
  theme(text = element_text(colour = "white"
                            #, family = "AnimeAce"
                            )) +
  theme(plot.title = element_text(
    #family = "AnimeAceBold", 
    size = rel(1.5))) +
  theme(plot.caption = element_text(size = rel(0.7))) +
  theme(plot.background = element_rect(fill = back_col)) +
  theme(panel.background = element_rect(fill = back_col)) +
  theme(panel.grid = element_line(colour = "gray40")) +
  theme(panel.grid.major.x = element_blank()) +
  theme(axis.text = element_text(colour = "white")) +
  theme(legend.position = c(0.5, 0.15)) +
  theme(legend.direction = "horizontal") +
  theme(legend.background = element_rect(fill = back_col)) +
  theme(legend.box.background = element_rect(fill = back_col)) +
  theme(legend.key = element_rect(fill = back_col,  colour = back_col)) +
  theme(legend.title = element_text(size = rel(0.8))) +
* guides(colour = FALSE,
*        fill = FALSE,
*        size = guide_legend(title.position = "top", title.hjust = 0.5,
*                            override.aes = list(colour = "white", alpha = 1)))
```
]]
.column[.content.center[
![](03_anime_files/figure-html/output_thematic_23-1.png)&lt;!-- --&gt;
]]
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:10",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
